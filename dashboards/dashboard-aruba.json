{"$schema":"https://dataexplorer.azure.com/static/d/schema/24/dashboard.json","id":"bc797cfd-5e62-4b81-abc4-14383893f2cf","eTag":"COjbJ/49XBQ2sXjuuZR3CA==","title":"aruba","tiles":[{"id":"fd891150-0508-403e-b6e0-14d64275693a","title":"temperature","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0034\" \n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| project IotHubDeviceId, Timestamp, Temperature, _temp_high_alarm, _temp_low_alarm,\n HighAlarm = iif(Temperature>_temp_high_alarm,true,false)\n| render timechart with (ysplit = panels) ","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"line","pageId":"eee0f93d-58fa-461d-830d-beacaf8d82dd","layout":{"x":0,"y":0,"width":15,"height":9},"usedParamVariables":["_deviceId","_endTime","_startTime","_temp_high_alarm","_temp_low_alarm"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[{"id":"7475efe9-33fa-4f0e-ad5f-54637e4db854","value":null}]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Temperature","_temp_high_alarm","_temp_low_alarm"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"4b96a494-86a6-4ef5-98a2-4d266e76d1d4","title":"Actual temperature","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0034\" \n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| summarize arg_max(Timestamp,*)\n| project Timestamp, TemperatureAlarm = iff(Temperature>_temp_high_alarm,\"High Temperature\", iff(Temperature<_temp_low_alarm, \"Low Temperature\", \"Normal Temperature\")), Temperature\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"card","pageId":"eee0f93d-58fa-461d-830d-beacaf8d82dd","layout":{"x":15,"y":0,"width":4,"height":5},"usedParamVariables":["_deviceId","_endTime","_startTime","_temp_high_alarm","_temp_low_alarm"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"089eceb0-cc62-445f-9074-22146e96d234","column":{"type":"specified","value":"TemperatureAlarm"},"conditions":[{"operator":"==","value":"High Temperature"}],"color":"red","indicator":{"kind":"text","text":{"type":"specified","value":"HIGH"}}},{"id":"75af840f-8497-474a-b022-77c921494108","column":{"type":"specified","value":"TemperatureAlarm"},"conditions":[{"operator":"==","value":"Normal Temperature"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"0cd55fea-3a46-4e80-b8ea-86795f3836a0","column":{"type":"specified","value":"TemperatureAlarm"},"conditions":[{"operator":"==","value":"Low Temperature"}],"color":"yellow","indicator":{"kind":"text","text":{"type":"specified","value":"LOW"}}}],"colorStyle":"light"}},{"id":"7d16a72a-9ef4-4ab9-8d71-e7d3b4f0e87b","title":"Humidity","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| where Type ==\"0034\"\n| render timechart with (ysplit = panels) \n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"line","pageId":"eee0f93d-58fa-461d-830d-beacaf8d82dd","layout":{"x":0,"y":9,"width":15,"height":8},"usedParamVariables":["_deviceId","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Humidity"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"1abb32cf-ac24-46e4-a84a-751e28107212","title":"Contact","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0033\"\n| render timechart with (ysplit = panels) \n| project  IotHubDeviceId,Timestamp, Contact \n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"table","pageId":"ce0ac246-288d-4e7d-9ae3-a759674b98a0","layout":{"x":0,"y":0,"width":8,"height":14},"usedParamVariables":["_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":false,"table__renderLinksForColumns":["Contact"],"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"35b0f21e-f36f-471e-ba81-f08a5c717d6d","title":"Accelometer","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0053\"\n| render timechart with (ysplit = panels) ","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"line","pageId":"a0721d18-7ccc-4af0-8198-71e8fb2dd415","layout":{"x":0,"y":0,"width":15,"height":8},"usedParamVariables":["_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Acceleration_X","Acceleration_Y","Acceleration_Z"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"b226a563-ced1-4124-b9a7-9092417e2660","title":"Temperature","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0053\"\n| render timechart with (ysplit = panels) \n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"line","pageId":"a0721d18-7ccc-4af0-8198-71e8fb2dd415","layout":{"x":0,"y":15,"width":16,"height":7},"usedParamVariables":["_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Temperature"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"69b3046f-b6c3-41ed-aee4-3a800c4ce81a","title":"Humidity","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0053\"\n| render timechart  \n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"line","pageId":"a0721d18-7ccc-4af0-8198-71e8fb2dd415","layout":{"x":0,"y":8,"width":15,"height":7},"usedParamVariables":["_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Humidity"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"6cafb1e8-b57e-4b0c-81d3-a053f537c213","title":"Switch","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where IotHubDeviceId  ==  ['_deviceId_switch']\n| order by Timestamp desc \n| project IotHubDeviceId, Timestamp, Button_A0,Button_AI,Button_B0,Button_BI\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"table","pageId":"7c68d8e8-2fbe-47e8-9edb-307c9e0a9e95","layout":{"x":0,"y":0,"width":15,"height":9},"usedParamVariables":["_deviceId_switch","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"table__enableRenderLinks":true,"table__renderLinksForColumns":[],"colorRules":[],"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"5ba7fad8-b4df-45f0-9d33-149469c17d03","title":"Status","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0033\"\n| top 1 by Timestamp\n| project status = iff(Contact==true, \"Open\", \"Close\")","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"card","pageId":"ce0ac246-288d-4e7d-9ae3-a759674b98a0","layout":{"x":10,"y":7,"width":5,"height":5},"usedParamVariables":["_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"c17ea4cd-b4aa-4bcf-a689-1286f5e71685","column":{"type":"infer"},"conditions":[{"operator":"==","value":"Open"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"a6e92958-d488-4f71-89c5-3751a00ae6ad","column":{"type":"infer"},"conditions":[{"operator":"==","value":"Close"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"dd3ca79e-9e44-4a78-ad8e-95a6d526b3fb","title":"Distribution of the Switch","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0033\"\n| summarize  count() by Contact\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"pie","pageId":"ce0ac246-288d-4e7d-9ae3-a759674b98a0","layout":{"x":9,"y":0,"width":9,"height":7},"usedParamVariables":["_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumn":{"type":"infer"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","crossFilter":[],"drillthrough":[]}},{"id":"7734002c-14b9-4902-bf92-232043fe1cee","title":"Button A0","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where IotHubDeviceId  ==  ['_deviceId_switch']\n| top 1 by Timestamp\n| project status = iff(Button_A0==true, \"Open\", \"Close\"), Button_A0","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"card","pageId":"7c68d8e8-2fbe-47e8-9edb-307c9e0a9e95","layout":{"x":0,"y":9,"width":5,"height":6},"usedParamVariables":["_deviceId_switch","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"c17ea4cd-b4aa-4bcf-a689-1286f5e71685","column":{"type":"infer"},"conditions":[{"operator":"==","value":"Open"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"a6e92958-d488-4f71-89c5-3751a00ae6ad","column":{"type":"infer"},"conditions":[{"operator":"==","value":"Close"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"3db9a190-f6c7-4d72-84e8-75f061b16ba7","title":"Button AI","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where IotHubDeviceId  ==  ['_deviceId_switch']\n| top 1 by Timestamp\n| project status = iff(Button_AI==true, \"Open\", \"Close\")","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"card","pageId":"7c68d8e8-2fbe-47e8-9edb-307c9e0a9e95","layout":{"x":5,"y":9,"width":5,"height":6},"usedParamVariables":["_deviceId_switch","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"c17ea4cd-b4aa-4bcf-a689-1286f5e71685","column":{"type":"infer"},"conditions":[{"operator":"==","value":"Open"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"a6e92958-d488-4f71-89c5-3751a00ae6ad","column":{"type":"infer"},"conditions":[{"operator":"==","value":"Close"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"70ed5835-fd55-492d-a9a6-b7479c503a9f","title":"Button B0","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where IotHubDeviceId  ==  ['_deviceId_switch']\n| top 1 by Timestamp\n| project status = iff(Button_B0==true, \"Open\", \"Close\")","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"card","pageId":"7c68d8e8-2fbe-47e8-9edb-307c9e0a9e95","layout":{"x":10,"y":9,"width":5,"height":6},"usedParamVariables":["_deviceId_switch","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"c17ea4cd-b4aa-4bcf-a689-1286f5e71685","column":{"type":"infer"},"conditions":[{"operator":"==","value":"Open"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"a6e92958-d488-4f71-89c5-3751a00ae6ad","column":{"type":"infer"},"conditions":[{"operator":"==","value":"Close"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"c0c0391c-8c7c-4e26-be56-4e99cdfa61b6","title":"Button BI","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where IotHubDeviceId  ==  ['_deviceId_switch']\n| top 1 by Timestamp\n| project status = iff(Button_BI==true, \"Open\", \"Close\")","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"card","pageId":"7c68d8e8-2fbe-47e8-9edb-307c9e0a9e95","layout":{"x":0,"y":15,"width":5,"height":6},"usedParamVariables":["_deviceId_switch","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"c17ea4cd-b4aa-4bcf-a689-1286f5e71685","column":{"type":"infer"},"conditions":[{"operator":"==","value":"Open"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"a6e92958-d488-4f71-89c5-3751a00ae6ad","column":{"type":"infer"},"conditions":[{"operator":"==","value":"Close"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"d591814b-cabf-4649-bd1a-6fbef3fdc695","title":"Actual Humidity","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| summarize arg_max(Timestamp,*)\n| project Humidity, HumidityAlarm = iff(Humidity>_humity_high_alarm,\"High Humidity\", iff(Humidity<_humidity_low_alarm, \"Low Humity\", \"Normal Humidity\"))\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"card","pageId":"eee0f93d-58fa-461d-830d-beacaf8d82dd","layout":{"x":15,"y":5,"width":4,"height":5},"usedParamVariables":["_deviceId","_endTime","_humidity_low_alarm","_humity_high_alarm","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"089eceb0-cc62-445f-9074-22146e96d234","column":{"type":"specified","value":"HumidityAlarm"},"conditions":[{"operator":"==","value":"High Humidity"}],"color":"red","indicator":{"kind":"text","text":{"type":"specified","value":"HIGH"}}},{"id":"75af840f-8497-474a-b022-77c921494108","column":{"type":"specified","value":"HumidityAlarm"},"conditions":[{"operator":"==","value":"Normal Humidity"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"0cd55fea-3a46-4e80-b8ea-86795f3836a0","column":{"type":"specified","value":"HumidityAlarm"},"conditions":[{"operator":"==","value":"Low Humidity"}],"color":"yellow","indicator":{"kind":"text","text":{"type":"specified","value":"LOW"}}}],"colorStyle":"light"}},{"id":"8ff353c7-32a5-48d9-bf49-38a055f124b0","title":"Button A0","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where IotHubDeviceId  ==  ['_deviceId_switch']\n| top 1 by Timestamp\n| project status = iff(Button_A0==true, \"Open\", \"Close\"), Button_A0","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"card","pageId":"a0721d18-7ccc-4af0-8198-71e8fb2dd415","layout":{"x":15,"y":0,"width":5,"height":6},"usedParamVariables":["_deviceId_switch","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"infer"},"colorRulesDisabled":false,"colorRules":[{"id":"c17ea4cd-b4aa-4bcf-a689-1286f5e71685","column":{"type":"infer"},"conditions":[{"operator":"==","value":"Open"}],"color":"red","indicator":{"kind":"text","text":{"type":"infer"}}},{"id":"a6e92958-d488-4f71-89c5-3751a00ae6ad","column":{"type":"infer"},"conditions":[{"operator":"==","value":"Close"}],"color":"green","indicator":{"kind":"text","text":{"type":"infer"}}}],"colorStyle":"light"}},{"id":"95eb5ae7-7a30-490b-a3f6-817e87cfd884","title":"Illumination","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0053\"\n| render timechart with (ysplit = panels) \n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"line","pageId":"a0721d18-7ccc-4af0-8198-71e8fb2dd415","layout":{"x":0,"y":22,"width":16,"height":7},"usedParamVariables":["_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Illumination"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"6ff49901-4c85-4c96-9306-dab33d16600a","title":"Temperature Statistics","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type =='0034' \n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| make-series data = avg(Temperature) default=0 on Timestamp from ['_startTime'] to ['_endTime'] step 10m\n| extend stat=series_stats_dynamic(data)\n| project min=stat.min, max=stat.max, avg=stat.avg, variance=stat.variance\n| evaluate narrow()\n\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"multistat","pageId":"eee0f93d-58fa-461d-830d-beacaf8d82dd","layout":{"x":0,"y":17,"width":12,"height":3},"usedParamVariables":["_deviceId","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"specified","value":"Value"},"colorRulesDisabled":false,"colorRules":[],"colorStyle":"light","multiStat__displayOrientation":"horizontal","multiStat__labelColumn":{"type":"specified","value":"Column"},"multiStat__slot":{"width":4,"height":1}}},{"id":"f9788a5e-be5f-4f54-8f07-ce86ad99892a","title":"Humidity Statistics","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type =='0034' \n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| make-series data = avg(Humidity) default=0 on Timestamp from ['_startTime'] to ['_endTime'] step 10m\n| extend stat=series_stats_dynamic(data)\n| project min=stat.min, max=stat.max, avg=stat.avg, variance=stat.variance\n| evaluate narrow()\n\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"multistat","pageId":"eee0f93d-58fa-461d-830d-beacaf8d82dd","layout":{"x":0,"y":20,"width":12,"height":3},"usedParamVariables":["_deviceId","_endTime","_startTime"],"visualOptions":{"hideTileTitle":false,"multiStat__textSize":"auto","multiStat__valueColumn":{"type":"specified","value":"Value"},"colorRulesDisabled":false,"colorRules":[],"colorStyle":"light","multiStat__displayOrientation":"horizontal","multiStat__labelColumn":{"type":"specified","value":"Column"},"multiStat__slot":{"width":4,"height":1}}},{"id":"63f8724c-03ae-4ac7-a0b6-dace3559ee7f","title":"Temperature Aggregation ","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0034\" \n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| make-series Temp = case( ['_operator']== 'avg', avg(Temperature), ['_operator']=='max', max(Temperature),  ['_operator']== 'min', min(Temperature), max(Humidity))  default=0 on Timestamp from ['_startTime'] to ['_endTime'] step case( ['_step'] == '5m', 5m, ['_step'] == '10m', 10m, ['_step'] == '30m', 30m, ['_step'] == '1h', 1h, 1d) by Location\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"line","pageId":"eee0f93d-58fa-461d-830d-beacaf8d82dd","layout":{"x":0,"y":23,"width":15,"height":7},"usedParamVariables":["_deviceId","_endTime","_operator","_startTime","_step"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Temp"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"74b268ac-0a6b-496d-a21b-a888f501ca78","title":"Humidity Aggregator","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0034\" \n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| make-series Humidity = case( ['_operator']== 'avg', avg(Humidity), ['_operator']=='max', max(Humidity),  ['_operator']== 'min', min(Humidity), max(Temperature))  default=0 on Timestamp from ['_startTime'] to ['_endTime'] step  case( ['_step'] == '5m', 5m, ['_step'] == '10m', 10m, ['_step'] == '30m', 30m, ['_step'] == '1h', 1h, 1d) by Location\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"line","pageId":"eee0f93d-58fa-461d-830d-beacaf8d82dd","layout":{"x":0,"y":30,"width":15,"height":7},"usedParamVariables":["_deviceId","_endTime","_operator","_startTime","_step"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Humidity"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"754661d1-39a9-449b-bd29-e4b7ff6ffc8f","title":"Temperature Anomalies","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0034\" \n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| make-series tempAvarage = avg(Temperature) default=0 on Timestamp from ['_startTime'] to ['_endTime'] step case( ['_step'] == '5m', 5m, ['_step'] == '10m', 10m, ['_step'] == '30m', 30m, ['_step'] == '1h', 1h, 1d)\n| extend anomalies = series_decompose_anomalies(tempAvarage,1)\n| render anomalychart with(anomalycolumns=anomalies, title='Anomalies')\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"anomalychart","pageId":"eee0f93d-58fa-461d-830d-beacaf8d82dd","layout":{"x":0,"y":37,"width":15,"height":7},"usedParamVariables":["_deviceId","_endTime","_startTime","_step"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"specified","value":"Timestamp"},"yColumns":{"type":"specified","value":["tempAvarage"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"00b9ad86-3598-441e-9aa5-ba44b9fe1d26","title":"Humidity Anomalies","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0034\" \n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| make-series humidity = avg(Humidity) default=0 on Timestamp from ['_startTime'] to ['_endTime'] step case( ['_step'] == '5m', 5m, ['_step'] == '10m', 10m, ['_step'] == '30m', 30m, ['_step'] == '1h', 1h, 1d)\n| extend anomalies = series_decompose_anomalies(humidity,1)\n| render anomalychart with(anomalycolumns=anomalies, title='Anomalies')\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"anomalychart","pageId":"eee0f93d-58fa-461d-830d-beacaf8d82dd","layout":{"x":0,"y":44,"width":15,"height":7},"usedParamVariables":["_deviceId","_endTime","_startTime","_step"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"specified","value":"Timestamp"},"yColumns":{"type":"specified","value":["humidity"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"e9a4cae2-30c4-44b9-a50e-13af1e307b44","title":"Forecast Humidity","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0034\" \n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| make-series humidity = avg(Humidity) default=0 on Timestamp from ['_startTime'] to ['_endTime'] step case( ['_step'] == '5m', 5m, ['_step'] == '10m', 10m, ['_step'] == '30m', 30m, ['_step'] == '1h', 1h, 1d)\n| extend forecast = series_decompose_forecast(humidity,10)\n\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"line","pageId":"eee0f93d-58fa-461d-830d-beacaf8d82dd","layout":{"x":0,"y":51,"width":15,"height":7},"usedParamVariables":["_deviceId","_endTime","_startTime","_step"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"specified","value":"Timestamp"},"yColumns":{"type":"specified","value":["humidity","forecast"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"3fa87ef1-ea57-4387-80dd-7e78f37ede85","title":"Temperature Trend Analisys","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0034\" \n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| make-series tempAvarage = avg(Temperature) default=0 on Timestamp from ['_startTime'] to ['_endTime'] step case( ['_step'] == '5m', 5m, ['_step'] == '10m', 10m, ['_step'] == '30m', 30m, ['_step'] == '1h', 1h, 1d)\n| extend  series_fit_2lines(tempAvarage)\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"line","pageId":"eee0f93d-58fa-461d-830d-beacaf8d82dd","layout":{"x":0,"y":58,"width":15,"height":7},"usedParamVariables":["_deviceId","_endTime","_startTime","_step"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"specified","value":"Timestamp"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilter":[],"crossFilterDisabled":false,"drillthroughDisabled":false,"drillthrough":[]}},{"id":"500f95d5-5e63-46c5-a4e7-71beb3b1a7dd","title":"Humidity Trend Analysis","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0034\" \n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| make-series humAvarage = avg(Humidity) default=0 on Timestamp from ['_startTime'] to ['_endTime'] step case( ['_step'] == '5m', 5m, ['_step'] == '10m', 10m, ['_step'] == '30m', 30m, ['_step'] == '1h', 1h, 1d)\n| extend  series_fit_2lines(humAvarage)\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"line","pageId":"eee0f93d-58fa-461d-830d-beacaf8d82dd","layout":{"x":0,"y":65,"width":15,"height":7},"usedParamVariables":["_deviceId","_endTime","_startTime","_step"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"specified","value":"Timestamp"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilter":[],"crossFilterDisabled":false,"drillthroughDisabled":false,"drillthrough":[]}},{"id":"be068df6-2daf-44d0-876e-a8a08c94bff9","title":"Contact Aggregation ","query":"iot_parsed\n| where Timestamp  between (['_startTime'] .. ['_endTime'])\n| where Type ==\"0033\" \n| where IotHubDeviceId  in (_deviceId) or isempty(_deviceId )\n| make-series TrueCount = countif(Contact==\"true\") default=0  on Timestamp from ['_startTime'] to ['_endTime'] step case( ['_step'] == '5m', 5m, ['_step'] == '10m', 10m, ['_step'] == '30m', 30m, ['_step'] == '1h', 1h, 1d) \n\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","visualType":"line","pageId":"ce0ac246-288d-4e7d-9ae3-a759674b98a0","layout":{"x":0,"y":14,"width":15,"height":7},"usedParamVariables":["_deviceId","_endTime","_startTime","_step"],"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[]},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["TrueCount"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}}],"dataSources":[{"id":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","name":"datasourceiot","clusterUri":"https://marcoclustername2.uksouth.kusto.windows.net/","database":"testdb","kind":"manual-kusto","scopeId":"kusto"}],"schema_version":"24","autoRefresh":{"enabled":true,"minInterval":"30s"},"parameters":[{"kind":"duration","id":"2ce8e37e-1a61-4ecf-9331-8ebeff33ea3b","displayName":"Time range","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"all"}},{"kind":"int32","id":"38d071a9-42b7-4cf8-84a0-0717e541963e","displayName":"Temperature High Alarm","variableName":"_temp_high_alarm","selectionType":"single-all","defaultValue":{"kind":"value","value":30},"dataSource":{"kind":"static","values":[{"value":20},{"value":30},{"value":35}]},"showOnPages":{"kind":"selection","pageIds":["eee0f93d-58fa-461d-830d-beacaf8d82dd"]}},{"kind":"int32","id":"1959c461-e580-41a7-b575-fa86026e2643","displayName":"Temperature Low Alarm","variableName":"_temp_low_alarm","selectionType":"single-all","defaultValue":{"kind":"value","value":10},"dataSource":{"kind":"static","values":[{"value":0},{"value":10},{"value":15}]},"showOnPages":{"kind":"selection","pageIds":["eee0f93d-58fa-461d-830d-beacaf8d82dd"]}},{"kind":"string","id":"f98ef666-ce3b-4ed1-b866-ab7715dabb77","displayName":"Device Temp Hum","variableName":"_deviceId","selectionType":"multi","defaultValue":{"kind":"all"},"dataSource":{"kind":"query","consumedVariables":[],"query":"iot_parsed \n| where Type ==\"0034\"\n| distinct  IotHubDeviceId\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","columns":{"value":"IotHubDeviceId"}},"showOnPages":{"kind":"selection","pageIds":["eee0f93d-58fa-461d-830d-beacaf8d82dd"]}},{"kind":"string","id":"d003b2fe-34bf-44ac-a859-5f037bec7ed1","displayName":"Magn Contact","variableName":"_deviceId_magnContact","selectionType":"single","defaultValue":{"kind":"value","value":"temp-hum"},"dataSource":{"kind":"query","consumedVariables":[],"query":"iot_parsed \n| where Type ==\"0033\"\n| distinct  IotHubDeviceId\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","columns":{"value":"IotHubDeviceId"}},"showOnPages":{"kind":"selection","pageIds":["ce0ac246-288d-4e7d-9ae3-a759674b98a0"]}},{"kind":"string","id":"b57d867b-71aa-47c6-a596-2c368906cd18","displayName":"Switch Device","variableName":"_deviceId_switch","selectionType":"single","defaultValue":{"kind":"value","value":"switch"},"dataSource":{"kind":"query","consumedVariables":[],"query":"iot_parsed \n| where Type ==\"000B\"\n| distinct  IotHubDeviceId\n","dataSourceId":"cbd4f094-bf23-4af8-ae75-a73ba5a2b8b8","columns":{"value":"IotHubDeviceId"}},"showOnPages":{"kind":"selection","pageIds":["7c68d8e8-2fbe-47e8-9edb-307c9e0a9e95"]}},{"kind":"int32","id":"6d14cf84-191c-4d16-9199-45187854626b","displayName":"Humidity High Alarm","variableName":"_humity_high_alarm","selectionType":"single","defaultValue":{"kind":"value","value":90},"dataSource":{"kind":"static","values":[{"value":80},{"value":90},{"value":95}]},"showOnPages":{"kind":"selection","pageIds":["eee0f93d-58fa-461d-830d-beacaf8d82dd"]}},{"kind":"int32","id":"54f13515-e502-42f7-9f3b-e81d63d6f612","displayName":"Humidity Low Alarm","variableName":"_humidity_low_alarm","selectionType":"single","defaultValue":{"kind":"value","value":35},"dataSource":{"kind":"static","values":[{"value":30},{"value":35},{"value":40}]},"showOnPages":{"kind":"selection","pageIds":["eee0f93d-58fa-461d-830d-beacaf8d82dd"]}},{"kind":"string","id":"22cc6aa8-06ca-4efc-8c68-6c3108520dfb","displayName":"Aggregation Operator","variableName":"_operator","selectionType":"single","defaultValue":{"kind":"value","value":"avg"},"dataSource":{"kind":"static","values":[{"value":"avg","displayText":"Avarage"},{"value":"min","displayText":"Minimum"},{"value":"max","displayText":"Maximum"}]},"showOnPages":{"kind":"all"}},{"kind":"string","id":"7388e2b3-16e0-4911-8672-fb96105297a6","displayName":"Step ","variableName":"_step","selectionType":"single","defaultValue":{"kind":"value","value":"10m"},"dataSource":{"kind":"static","values":[{"value":"5m","displayText":"5 Minutes"},{"value":"10m","displayText":"10 Minutes"},{"value":"30m","displayText":"30 Minutes"},{"value":"1h","displayText":"1 Hour"}]},"showOnPages":{"kind":"all"}}],"pages":[{"name":"Temp-humidity Devices","id":"eee0f93d-58fa-461d-830d-beacaf8d82dd"},{"name":"Magnetic Contact Devices","id":"ce0ac246-288d-4e7d-9ae3-a759674b98a0"},{"name":"multisensor Device","id":"a0721d18-7ccc-4af0-8198-71e8fb2dd415"},{"name":"Switch Device","id":"7c68d8e8-2fbe-47e8-9edb-307c9e0a9e95"}]}